<div class="chatbot-container">
  <button class="chatbot-btn" (click)="toggleChatbot()">ðŸ’¬</button>

  <div class="chatbot-window" *ngIf="chatbotOpen">
    <div class="chatbot-header">
      <span>AI Chatbot</span>
      <button class="close-btn" (click)="toggleChatbot()">Ã—</button>
    </div>

    <div class="chatbot-body" #chatBody>
      <div *ngFor="let msg of messages" [ngClass]="msg.sender" class="chat-message">
        <!-- Ù¾ÛŒØ§Ù… Ù…ØªÙ†ÛŒ -->
        <div *ngIf="msg.text">
          <span>{{ msg.text }}</span>
          <div class="timestamp">
            {{ msg.timestamp | date:'MMM d, y, HH:mm' }}
          </div>
        </div>
    
        <!-- Ù¾ÛŒØ§Ù… ÙØ§ÛŒÙ„ -->
        <div *ngIf="msg.fileType === 'pdf'" class="file-message" [ngClass]="msg.sender">
          <span [innerHTML]="pdfIconSafe"></span>
          <span class="file-name">{{ msg.fileName }}</span>
          <div class="timestamp">
            {{ msg.timestamp | date:'MMM d, y, HH:mm' }}
          </div>
        </div>
      </div>
    </div>

    <div class="chatbot-footer">
      <input
        type="text"
        [(ngModel)]="userInput"
        (keydown.enter)="sendMessage()"
        placeholder="Type a message..."
      />

      <!-- Ø¯Ú©Ù…Ù‡ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† -->
      <button class="icon-btn" (click)="startDictation()">
        ðŸŽ¤
      </button>

      <!-- Ø¯Ú©Ù…Ù‡ Ø¢Ù¾Ù„ÙˆØ¯ -->
      <button class="icon-btn" (click)="triggerFileUpload()">
        ðŸ“Ž
      </button>
      <input
        type="file"
        #fileInput
        style="display: none"
        accept="application/pdf"
        (change)="onFileSelected($event)"
      />

      <!-- Ø¯Ú©Ù…Ù‡ Ø§Ø±Ø³Ø§Ù„ -->
      <button class="icon-btn" (click)="sendMessage()">
        âž¤
      </button>
    </div>

    <!-- Ù†Ù…Ø§ÛŒØ´ Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ -->
    <div *ngIf="selectedFileName" class="file-info">
      Selected: {{ selectedFileName }}
    </div>
  </div>
</div>
